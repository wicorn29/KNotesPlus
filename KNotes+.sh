#!/bin/sh
# Name: KNotes+
# Author: Wicorn29
# Icon: data:image/png;base64,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
# DontUseFBInk

# Modified Version Of Illusion By Penguins184, For Less Tampering With VAR/LOCAL.

APP_ID="xyz.wicorn29.knotes+"
SOURCE_DIR="/mnt/us/documents/KNotes+"
DB="/var/local/appreg.db"

BIN_HF="$SOURCE_DIR/assets/UtildHF"
BIN_SF="$SOURCE_DIR/assets/UtildSF"

if [ -e /lib/ld-linux-armhf.so.3 ]; then
    BINARY="$BIN_HF"
else
    BINARY="$BIN_SF"
fi

if [ -x "$BINARY" ]; then
    "$BINARY"
elif [ -e "$BINARY" ]; then
    chmod +x "$BINARY"
    "$BINARY"
fi

sqlite3 "$DB" <<EOF
INSERT OR IGNORE INTO interfaces(interface) VALUES('application');
INSERT OR IGNORE INTO handlerIds(handlerId) VALUES('$APP_ID');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','lipcId','$APP_ID');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','command','/usr/bin/mesquite -l $APP_ID -c file://$SOURCE_DIR/');
INSERT OR REPLACE INTO properties(handlerId,name,value) VALUES('$APP_ID','supportedOrientation','U');
EOF

echo "Registered $APP_ID. You may now launch it via LIPC."
sleep 2

nohup lipc-set-prop com.lab126.appmgrd start app://$APP_ID >/dev/null 2>&1 &
